#!/bin/bash

# Example custom chains
$IPT -N vlan_1
$IPT -N vlan_2
$IPT -N vlan_10
$IPT -N vlan_21

$IPT -A FORWARD -s $NET_VLAN1 -j vlan_1
$IPT -A FORWARD -s $NET_VLAN2 -j vlan_2
$IPT -A FORWARD -s $NET_VLAN10 -j vlan_10
$IPT -A FORWARD -s $NET_VLAN10 -j vlan_21
$IPT -A FORWARD -d $NET_VLAN1 -j vlan_1
$IPT -A FORWARD -d $NET_VLAN2 -j vlan_2
$IPT -A FORWARD -d $NET_VLAN10 -j vlan_10
$IPT -A FORWARD -d $NET_VLAN10 -j vlan_21

# Example ICMP stuff
$IPT -A INPUT -p $P_ICMP $ICMP_TYPE 6 -j ACCEPT
$IPT -A INPUT -p $P_ICMP $ICMP_TYPE 4 -j ACCEPT
$IPT -A INPUT -p $P_ICMP $ICMP_TYPE 8 -j ACCEPT
$IPT -A INPUT -p $P_ICMP $ICMP_TYPE 7 -j ACCEPT
$IPT -A OUTPUT -p $P_ICMP $ICMP_TYPE 6 -j ACCEPT
$IPT -A OUTPUT -p $P_ICMP $ICMP_TYPE 4 -j ACCEPT
$IPT -A OUTPUT -p $P_ICMP $ICMP_TYPE 8 -j ACCEPT
$IPT -A OUTPUT -p $P_ICMP $ICMP_TYPE 7 -j ACCEPT
$IPT -A FORWARD -p $P_ICMP $ICMP_TYPE 6 -j ACCEPT
$IPT -A FORWARD -p $P_ICMP $ICMP_TYPE 4 -j ACCEPT
$IPT -A FORWARD -p $P_ICMP $ICMP_TYPE 8 -j ACCEPT
$IPT -A FORWARD -p $P_ICMP $ICMP_TYPE 7 -j ACCEPT

# Example default policy
$IPT -P FORWARD DROP
